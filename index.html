<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Bringing together students and professionals to reduce existential risks from superintelligent AI systems.">
  <title>Cambridge AI Safety Hub</title>

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="apple-touch-icon" href="/images/favicon.png">

  <!-- Preload critical resources -->
  <link rel="preload" href="/styles.css" as="style">
  <link rel="preload" href="/images/logo.png" as="image">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Space+Mono:wght@400&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>
  <nav>
    <div class="nav-inner">
      <a href="/" aria-label="Home">
        <img src="/images/logo.png" alt="CAISH" class="logo" width="50" height="50">
      </a>
      <ul class="nav-links">
        <li><a href="/fellowship">Alignment Fellowship</a></li>
        <li><a href="/mars">MARS</a></li>
        <li><a href="/socials">Socials</a></li>
        <li><a href="/about">About</a></li>
      </ul>
      <button class="nav-toggle" aria-label="Open menu" id="nav-toggle">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
  </nav>

  <div id="mobile-nav" class="mobile-nav">
    <button class="mobile-nav-close" aria-label="Close menu" id="mobile-nav-close">&times;</button>
    <ul>
      <li><a href="/fellowship">Alignment Fellowship</a></li>
      <li><a href="/mars">MARS</a></li>
      <li><a href="/socials">Socials</a></li>
      <li><a href="/about">About</a></li>
    </ul>
  </div>

  <main>
  <section class="hero" id="main-content">
    <div class="hero-content">
      <span class="label">Cambridge AI Safety Hub</span>
      <h1>Building the AI Safety Community in <em>Cambridge</em></h1>
      <p>A hub bringing together students and professionals to reduce existential risks from superintelligent AI systems.</p>
    </div>
    <div class="hero-image">
      <svg class="hourglass-svg" viewBox="0 0 100 120" xmlns="http://www.w3.org/2000/svg" aria-label="Animated hourglass">
        <!-- Hourglass frame -->
        <g class="hourglass-frame">
          <!-- Top line -->
          <path d="M 15 12 C 25 10, 75 10, 85 12" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-1"/>
          <!-- Left top diagonal -->
          <path d="M 15 12 C 20 25, 40 50, 50 60" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-2"/>
          <!-- Right top diagonal -->
          <path d="M 85 12 C 80 25, 60 50, 50 60" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-3"/>
          <!-- Left bottom diagonal -->
          <path d="M 50 60 C 40 70, 20 95, 15 108" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-4"/>
          <!-- Right bottom diagonal -->
          <path d="M 50 60 C 60 70, 80 95, 85 108" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-5"/>
          <!-- Bottom line -->
          <path d="M 15 108 C 25 110, 75 110, 85 108" fill="none" stroke="#1a1a1a" stroke-width="2.5" stroke-linecap="round" class="line line-6"/>
        </g>

        <!-- Falling sand particles -->
        <g class="sand-falling">
          <circle cx="50" cy="62" r="1.5" fill="#1a1a1a" class="sand-drop sand-drop-1"/>
          <circle cx="50" cy="62" r="1.5" fill="#1a1a1a" class="sand-drop sand-drop-2"/>
          <circle cx="50" cy="62" r="1.5" fill="#1a1a1a" class="sand-drop sand-drop-3"/>
        </g>

        <!-- Sand pile at bottom -->
        <g class="sand-pile">
          <circle cx="50" cy="102" r="2" fill="#1a1a1a" class="pile pile-1"/>
          <circle cx="44" cy="104" r="1.8" fill="#1a1a1a" class="pile pile-2"/>
          <circle cx="56" cy="104" r="1.8" fill="#1a1a1a" class="pile pile-3"/>
          <circle cx="38" cy="105" r="1.5" fill="#1a1a1a" class="pile pile-4"/>
          <circle cx="62" cy="105" r="1.5" fill="#1a1a1a" class="pile pile-5"/>
          <circle cx="47" cy="105" r="1.6" fill="#1a1a1a" class="pile pile-6"/>
          <circle cx="53" cy="105" r="1.6" fill="#1a1a1a" class="pile pile-7"/>
          <circle cx="33" cy="106" r="1.3" fill="#1a1a1a" class="pile pile-8"/>
          <circle cx="67" cy="106" r="1.3" fill="#1a1a1a" class="pile pile-9"/>
          <circle cx="41" cy="106" r="1.4" fill="#1a1a1a" class="pile pile-10"/>
          <circle cx="59" cy="106" r="1.4" fill="#1a1a1a" class="pile pile-11"/>
        </g>
      </svg>
    </div>
  </section>

  <div class="divider"><div class="divider-line"></div></div>

  <section id="about" class="mission">
    <div class="mission-text">
      <span class="label">Our Mission</span>
      <h2>Fostering rigorous thought on the safety of advanced AI</h2>
      <p>We believe that the development of advanced artificial intelligence presents one of the most significant challenges of our time.</p>
      <p>By bringing together the brightest minds in Cambridge, we aim to accelerate technical alignment research and promote thoughtful governance strategies.</p>
    </div>
    <div class="mission-image">
      <img src="/images/punting.png" alt="Punting on the River Cam" loading="lazy">
    </div>
  </section>

  <div class="divider"><div class="divider-line"></div></div>

  <section id="initiatives" class="initiatives">
    <span class="label">What We Do</span>
    <h2>Core Initiatives</h2>
    <div class="initiatives-list">
      <div class="initiative-item">
        <span class="initiative-num">01</span>
        <div class="initiative-content">
          <h3><a href="/fellowship">Alignment Fellowship</a></h3>
          <p>Our reading groups introduce you to the core problems in AI safety, with two tracks: technical alignment and governance. Whether you're new to the field or deepening your expertise, this is where it starts.</p>
        </div>
      </div>
      <div class="initiative-item">
        <span class="initiative-num">02</span>
        <div class="initiative-content">
          <h3><a href="/mars">Mentorship for Alignment Research (MARS)</a></h3>
          <p>A part-time research programme where you work in groups with mentors from organisations such as Redwood Research, MIT AI Risk Initiative, Geodesic Research, Institute for AI Policy and Strategy and many more â€” with a two-week in-person kick-off.</p>
        </div>
      </div>
      <div class="initiative-item">
        <span class="initiative-num">03</span>
        <div class="initiative-content">
          <h3><a href="/socials">Socials & Community</a></h3>
          <p>Weekly socials to help you find companions as you tackle these challenges together. We also run hackathons, retreats, and other special events throughout the year. See below for upcoming dates.</p>
        </div>
      </div>
    </div>
  </section>

  <div class="divider"><div class="divider-line"></div></div>

  <section id="events" class="events">
    <div class="events-header">
      <div>
        <span class="label">Events</span>
        <h2>Lent Term<img src="/images/easter.png" alt="" class="easter-egg-img" loading="lazy" width="50" height="50"></h2>
      </div>
      <a href="/socials" class="events-link">View all events</a>
    </div>
    <div id="home-events-container">
      <div class="events-loading">Loading events...</div>
    </div>
  </section>

  <section id="join" class="cta">
    <div class="cta-inner">
      <div>
        <span class="label">Get Involved</span>
        <h2>Join the conversation</h2>
        <p>Whether you're an undergraduate, PhD student, or professional researcher, there's a place for you in our community.</p>
        <a href="https://share-eu1.hsforms.com/2KPfUeCBRQI-OBE-kSQXfuQ2fgt25" class="btn">Sign up to our mailing list</a>
      </div>
      <div class="cta-image">
        <img src="/images/footer-logo.png" alt="CAISH logo" loading="lazy">
      </div>
    </div>
  </section>
  </main>

  <footer>
    <div class="footer-inner">
      <div class="footer-legal">
        Cambridge AI Safety Hub is a project of <a href="https://find-and-update.company-information.service.gov.uk/company/13653958" target="_blank" rel="noopener">Meridian Impact CIC</a>, a Community Interest Company registered at Companies House (company number 13653958).
      </div>
      <span class="footer-copy">&copy; 2026 CAISH</span>
    </div>
  </footer>

  <script>
    const MobileNav = {
      init() {
        const nav = document.getElementById('mobile-nav');
        const toggle = document.getElementById('nav-toggle');
        const close = document.getElementById('mobile-nav-close');

        toggle?.addEventListener('click', () => nav?.classList.add('active'));
        close?.addEventListener('click', () => nav?.classList.remove('active'));
        nav?.querySelectorAll('a').forEach(a => a.addEventListener('click', () => nav.classList.remove('active')));
      }
    };

    const HomeEvents = {
      escapeHtml(unsafe) {
        if (typeof unsafe !== 'string') return '';
        return unsafe
          .replace(/&/g, '&amp;')
          .replace(/</g, '&lt;')
          .replace(/>/g, '&gt;')
          .replace(/"/g, '&quot;')
          .replace(/'/g, '&#039;');
      },

      async init() {
        const container = document.getElementById('home-events-container');
        if (!container) return;

        try {
          const response = await fetch('/.netlify/functions/events?limit=3');
          const data = await response.json();

          if (!response.ok) {
            throw new Error(data.error || 'Failed to load events');
          }

          this.renderEvents(container, data.events);
        } catch (error) {
          console.error('Error loading events:', error);
          container.innerHTML = '<div class="events-empty">Events coming soon.</div>';
        }
      },

      formatDate(dateString) {
        const date = new Date(dateString);
        return date.toLocaleDateString('en-GB', {
          weekday: 'short',
          day: 'numeric',
          month: 'short'
        });
      },

      formatTime(dateString) {
        const date = new Date(dateString);
        return date.toLocaleTimeString('en-GB', {
          hour: '2-digit',
          minute: '2-digit'
        });
      },

      renderEvents(container, events) {
        // Filter to only upcoming events
        const now = new Date();
        const upcoming = events.filter(e => {
          const event = e.event || e;
          const startDate = new Date(event.start_at || event.start_time);
          return startDate >= now;
        });

        if (!upcoming || upcoming.length === 0) {
          container.innerHTML = '<div class="events-empty">No upcoming events. Check back soon!</div>';
          return;
        }

        let html = '<div class="home-events-list">';
        upcoming.forEach(entry => {
          const event = entry.event || entry;
          const name = event.name || 'Untitled Event';
          const startAt = event.start_at || event.start_time;
          const url = event.url || (event.api_id ? `https://lu.ma/${event.api_id}` : '#');
          const location = event.geo_address_info?.city || event.location || 'Cambridge';

          html += `
            <a href="${this.escapeHtml(url)}" target="_blank" rel="noopener" class="home-event-item">
              <div class="home-event-date">
                <span class="home-event-day">${this.escapeHtml(this.formatDate(startAt))}</span>
                <span class="home-event-time">${this.escapeHtml(this.formatTime(startAt))}</span>
              </div>
              <div class="home-event-info">
                <h3 class="home-event-title">${this.escapeHtml(name)}</h3>
                <span class="home-event-location">${this.escapeHtml(location)}</span>
              </div>
              <span class="home-event-arrow">&rarr;</span>
            </a>
          `;
        });
        html += '</div>';

        container.innerHTML = html;
      }
    };

    document.readyState === 'loading'
      ? document.addEventListener('DOMContentLoaded', () => {
          MobileNav.init();
          HomeEvents.init();
        })
      : (() => {
          MobileNav.init();
          HomeEvents.init();
        })();
  </script>
</body>
</html>
